<%- include('../layout/header.ejs') %>
<main>
  <section class="container section">
    <header class="section-head with-action">
      <h2>Thêm phòng mới</h2>
      <a class="btn secondary" href="/">← Quay lại trang chủ</a>
    </header>

    <% if (message) { %>
      <div class="alert <%= message.type %>">
        <span class="alert-icon"><%= message.type === 'success' ? '✅' : '⚠️' %></span>
        <span><%= message.mess %></span>
      </div>
    <% } %>

    <form class="form" action="/rooms" method="post" enctype="multipart/form-data">
      <div class="form-grid">
        <label class="form-field">
          <span class="label">Số phòng *</span>
          <input type="text" name="SoPhong" required placeholder="Ví dụ: P101">
        </label>
        <label class="form-field">
          <span class="label">Vị trí tầng</span>
          <input type="number" name="ViTriTang" min="0" placeholder="Ví dụ: 5">
        </label>
      </div>

      <div class="form-grid">
        <label class="form-field">
          <span class="label">Trạng thái</span>
          <select name="TrangThaiPhong">
            <option value="Trống">Trống</option>
            <option value="Đang sử dụng">Đang sử dụng</option>
            <option value="Bảo trì">Bảo trì</option>
          </select>
        </label>
        <label class="form-field">
          <span class="label">Loại phòng *</span>
          <select name="MaLoaiPhong" required>
            <option value="" disabled selected>-- Chọn loại phòng --</option>
            <% roomTypes.forEach(type => { %>
              <option value="<%= type.MaLoaiPhong %>"><%= type.TenLoaiPhong %></option>
            <% }) %>
          </select>
        </label>
      </div>

      <div class="form-grid">
        <label class="form-field">
          <span class="label">View</span>
          <input type="text" name="View" placeholder="Ví dụ: Hướng biển">
        </label>
        <label class="form-field">
          <span class="label">Địa chỉ</span>
          <input type="text" name="DiaChi" placeholder="Địa chỉ phòng">
        </label>
      </div>

      <div class="form-grid">
        <label class="form-field">
          <span class="label">Đánh giá</span>
          <input type="number" step="0.1" min="0" max="5" name="Rating" placeholder="Ví dụ: 4.5">
        </label>
        <label class="form-field">
          <span class="label">Giá phòng (VND) *</span>
          <input type="number" min="0" step="1000" name="Gia" required placeholder="Ví dụ: 1200000">
        </label>
      </div>

      <div class="form-grid">
        <label class="form-field">
          <span class="label">Mã thiết bị</span>
          <input type="number" min="0" name="MaThietBi" placeholder="Nhập mã thiết bị (nếu có)">
        </label>
        <label class="form-field">
          <span class="label">Hình ảnh</span>
          <input type="file" name="HinhAnh" accept="image/*">
        </label>
      </div>

      <label class="form-field">
        <span class="label">Mô tả</span>
        <textarea name="MoTa" rows="4" placeholder="Mô tả chi tiết về phòng"></textarea>
      </label>

      <div class="form-actions">
        <button type="submit" class="btn primary">Lưu phòng</button>
        <a class="btn" href="/">Huỷ</a>
      </div>
    </form>
  </section>
</main>
<%- include('../layout/footer.ejs') %>
